$(document).ready(function () {
    // function to call API to get coupons
    function getCoupon(){
        // var results=$(".results")

        // creating the parameter for the API call
        // they were generated by www.rapidapi.com
        const settings = {
            "async": true,
            "crossDomain": true,
            "url": "https://kuponiko.p.rapidapi.com/recent/US",
            "method": "GET",
            "headers": {
                "x-rapidapi-key": "8d5bb00771mshf04ccd929144b52p1608fdjsnf4a568afba9b",
                "x-rapidapi-host": "kuponiko.p.rapidapi.com"
            }
        };
        //AJAX call to the API
        $.ajax(settings).done(function (response) {
            //on return, show the data in the webpage
            //dynamically creating the DOM element and placing them in the DIV results
            console.log(response);
            var ol=$("<ol>");
            for (i=0;i<25;i++){
                var ul=$("<ul>");
                var li=$("<li>").text("store: "+response[i].store_name);
                ul.append(li);
                var li=$("<li>").text("desc.: "+response[i].description);
                ul.append(li);
                var li=$("<li>").text("code : "+response[i].code);
                ul.append(li);
                ol.append(ul);
            };
            $(".results").append(ol);
        });
    };
    
    $("#btnSubmit").click(function(){
        getCoupon();
    });

    function storeLocator(){
        //  Store API key
        var storeKey = "QT1peEznndyQicqT0mnuGmOLI0QxBfAV";

        // QueryURL
        var storeQueryURL = "https://api.tomtom.com/search/2/search/pizza.json?lat=37.337&lon=-121.89&key=" + storeKey;

        $.ajax({
            url: storeQueryURL,
            method: "GET"
        }).then(function (response) {
            console.log(response);
        });
    };
    $("#btnStore").click(function() {
        storeLocator();
    });
});